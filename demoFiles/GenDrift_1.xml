<?xml version="1.0" encoding="us-ascii"?>
<!DOCTYPE library SYSTEM "DeltaTickFormat.dtd">
<library name="Blocks Library" version="0.1">
    <numberSpecies number="1" message="You need only 2 species in this activity"></numberSpecies>
    
    <breed singular="wolf" plural="wolves" setupNumber="25" setupNumbers="15,20,25,30,35" maxNumber="50">
        <ownVar name="age">
            <maxReporter>100</maxReporter>
            <setupReporter>random 3</setupReporter>
        </ownVar>
        <ownVar name="energy">
            <maxReporter>100</maxReporter>
            <setupReporter>random 100</setupReporter>
        </ownVar>
            
        <setupCode>
    setxy random-xcor random-ycor
    set size 1.5
        </setupCode>
        <updateCode>
        set age age + 1
        set energy energy - 1
        if (energy &lt; 0) [if any? out-link-neighbors [ask out-link-neighbors [die]] die]
        </updateCode>
    </breed> 
    
    <breed singular="bird" plural="birds" setupNumber="25" setupNumbers="15,20,25,30,35" maxNumber="50">
        <ownVar name="age">
            <maxReporter>100</maxReporter>
            <setupReporter>random 3</setupReporter>
        </ownVar>
        <ownVar name="energy">
            <maxReporter>100</maxReporter>
            <setupReporter>random 100</setupReporter>
        </ownVar>
            
        <setupCode>
    setxy random-xcor random-ycor
    set size 1.5
        </setupCode>
        <updateCode>
        set age age + 1
        set energy energy - 1
        if (energy &lt; 0) [if any? out-link-neighbors [ask out-link-neighbors [die]] die]
        </updateCode>
    </breed> 
    
    <breed singular="rabbit" plural="rabbits" setupNumber="50" setupNumbers="30,40,50,60" maxNumber="60">
        <ownVar name="age">
            <maxReporter>100</maxReporter>
            <setupReporter>random 3</setupReporter>
        </ownVar>
        <ownVar name="energy">
            <maxReporter>100</maxReporter>
            <setupReporter>random 100</setupReporter>
        </ownVar>

        <setupCode>
    setxy random-xcor random-ycor
    set size 1.5
        </setupCode>
        <updateCode>
        set age age + 1
        set energy energy - 1
        if (energy &lt; 0) [if any? out-link-neighbors [ask out-link-neighbors [die]] die]
        </updateCode>
    </breed>

    <breed singular="bug" plural="bugs" setupNumber="50" setupNumbers="30,40,50,60" maxNumber="60">
        <ownVar name="age">
            <maxReporter>100</maxReporter>
            <setupReporter>random 3</setupReporter>
        </ownVar>
        <ownVar name="energy">
            <maxReporter>100</maxReporter>
            <setupReporter>random 100</setupReporter>
        </ownVar>

        <setupCode>
    setxy random-xcor random-ycor
    set size 1.5
        </setupCode>
        <updateCode>
        set age age + 1
        set energy energy - 1
        if (energy &lt; 0) [if any? out-link-neighbors [ask out-link-neighbors [die]] die]
        </updateCode>
    </breed>
    
    <setup>
        ask patches [ ifelse random 5 &lt; 4 [ set pcolor green + 3 ][set pcolor brown + 2] ]
    </setup>
    
    <envt envtName="barrier">
        <ownVar name="painted?"></ownVar>     
        <setupCode>    
        </setupCode>
        <updateCode>            
        </updateCode>
    </envt>  
    
    
    <trait name="spots-on-back">
        <setupReporter>random 9</setupReporter>
        <variation name="five-spots" value="5" color="" setupNumber="25"></variation>
        <variation name="four-spots" value="4" color="" setupNumber="15"></variation>
        <variation name="three-spots" value="3" color="" setupNumber="30"></variation>
        <variation name="two spots" value="2" color="" setupNumber="20"></variation>
        <variation name="one spot" value="1" color="" setupNumber="10"></variation>
        <message>How many spots do they have on their body?</message>
        <visualizeCode>set-sense-cone</visualizeCode>
        <visualizeProcedure>
        let spot-number spots-on-back
        hatch 1 [
        set breed sense-cones
        set size 1
        fd 1
        create-link-from myself [tie]
        set shape "circle"
        set color (spot-number * 20) + 5
        set label spot-number
        set label-color black]
        </visualizeProcedure>
        <visualizeGoCode>show-sense-cone</visualizeGoCode>
        <visualizeGoProcedure>
            ask my-out-links [set hidden? false]
        </visualizeGoProcedure>
        <traitShape>vision cone</traitShape>
                
    </trait>   
        
    <global name="turtles-last-tick">
        <setupReporter>count turtles</setupReporter>
        <updateReporter>count turtles</updateReporter>        
    </global>

    <go>
    if not any? turtles [ 
			user-message (word "All the predators and prey died out! Were they eating and having babies?")
			stop
		]
    </go>
    
    <condition name="any-here?" traits="">
        <input name="breed-type" default="who?"></input>
        <test>report any? other turtles-here with [ breed = breed-type ]</test>
    </condition>
    
    <condition name="age-more-than" traits="">
        <input name="my-age" default="10"></input>        
        <test>report age &gt; my-age</test>
    </condition>
    
    <behavior name="move-about" traits="speed">
        <commands>
        right (random-float 40)
        left (random-float 40)
        fd .3        
        </commands>
    </behavior>
    
    <behavior name="eat" traits="">        
        <agentInput name="prey" default="who?" tooltip="Who do they eat?"></agentInput>
        <commands>
        if any? other turtles-here with [breed = prey] [
    let food one-of turtles-here with [breed = prey]
    ask food [if any? out-link-neighbors [ask out-link-neighbors [die] die]]]
    set energy energy + 100  
        </commands>
    </behavior>
    
    <behavior name="eat-grass" traits="">
        <commands>set energy energy + 10</commands>
    </behavior>
    
    <behavior name="die-with-chance" traits="">
        <percentInput name="probability" default="1"></percentInput>		
        <commands>if random-float 100 &lt; probability [if any? out-link-neighbors [ask out-link-neighbors [die]] die]       
        </commands>            
    </behavior>
    
    <behavior name="have-babies" traits="" mutate="true">
        <commands>
        ifelse count out-link-neighbors > 0 [ 
        hatch 1 [set age 0 rt random 180 fd 1 set-sense-cone]]
        [hatch 1 [set age 0 rt random 180 fd 1]
        </commands>
    </behavior>
    
    <diveIn>
        <setupCode>
        create-predators 1 [
        set size 2
        set shape "x"]
        </setupCode>
        <reporterCode>
        hide-turtle
        setxy mouse-xcor mouse-ycor
        ;; only show the predator if the mouse pointer is
        ;; actually inside the view
        set hidden? not mouse-inside?
        report mouse-down?   
        </reporterCode>
    </diveIn>
    
    <quantity name="number-of" histo="false" xlabel="Time" ylabel="Count" istrait="false">
        <input name="breed-type" default="species"></input>	
        <reporter>report count turtles with [ breed = breed-type ]</reporter>
    </quantity>
    
    <quantity name="average-of" histo="false" xlabel="Time" ylabel="Average" runresult="true" istrait="true">
        <input name="breed-type" default="species"></input>
        <input name="variable" default="trait"  tooltip="Trait"></input>        
        <reporter>
			ifelse not any? turtles with [breed = breed-type] [
				report 0
			]
			[
				report mean [runresult variable] of turtles with [breed = breed-type]
			]
		</reporter>
    </quantity>
    
    <quantity name="trial" histo="true" xlabel="Variations" ylabel="Count" istrait="true">
        <input name="tBlock" default="trait"></input>
        <reporter>report count turtles with [ breed = breed-type ]</reporter>
    </quantity>
       
    
    <visualization name="set-sense-cone" trait="vision">
        <commands>
        enter code here
        </commands>
    </visualization>
    
    <interface>
        <numberSpecies>2</numberSpecies>
        <mutationSlider>false</mutationSlider>
        <drawFeature>false</drawFeature>
        <stepIn>false</stepIn>
    </interface>
    
</library>
